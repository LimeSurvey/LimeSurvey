CodeMirror.defineMode("bbcode",function(a){var c,f="b i u s img quote code list table  tr td size color url",k="* :-) hr cut";a.hasOwnProperty("bbCodeTags")&&(f=a.bbCodeTags);a.hasOwnProperty("bbCodeUnaryTags")&&(k=a.bbCodeUnaryTags);a=function(b){return b.replace(/([\:\-\)\(\*\+\?\[\]])/g,"\\$1")};var h=/[a-zA-Z0-9_]/,l=/['"]/,m=new RegExp("(?:"+a(f).split(" ").join("|")+")"),n=new RegExp("(?:"+a(k).split(" ").join("|")+")"),g={tokenizer:function(b,d){return b.eatSpace()?null:b.match("[",!0)?(d.tokenize=
g.bbcode,c="startTag","tag"):(b.next(),null)},inAttribute:function(b){return function(d,c){for(var a,e=null;!d.eol();){if(a=d.peek(),d.next()==b&&"\\"!==e){c.tokenize=g.bbcode;break}e=a}return"string"}},bbcode:function(b,d){if(b.match("]",!0))return d.tokenize=g.tokenizer,c=null,"tag";if(b.match("[",!0))return c="startTag","tag";var a=b.next();if(l.test(a))return d.tokenize=g.inAttribute(a),c="string","string";if(/\d/.test(a))return b.eatWhile(/\d/),c="number","number";if("whitespace"==d.last)return b.eatWhile(h),
c="modifier","attribute";if("property"==d.last)return b.eatWhile(h),c=null,"property";if(/\s/.test(a))return c="whitespace",null;var f,e="";for("/"!=a&&(e+=a);f=b.eat(h);)e+=f;return n.test(e)?(c="atom","atom"):m.test(e)?(c="keyword","keyword"):/\s/.test(a)?null:(c="tag","tag")}};return{startState:function(){return{tokenize:g.tokenizer,mode:"bbcode",last:null}},token:function(b,a){b=a.tokenize(b,a);return a.last=c,b},electricChars:""}});CodeMirror.defineMIME("text/x-bbcode","bbcode");