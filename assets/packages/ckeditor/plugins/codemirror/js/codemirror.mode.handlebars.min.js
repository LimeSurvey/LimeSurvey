!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/simple.js",["../../lib/codemirror"],b):b(CodeMirror)}(function(b){function n(m,a){if(!m.hasOwnProperty(a))throw Error("Undefined state "+a+" in simple mode");}function x(m,a){if(!m)return/(?:)/;var d="";return m instanceof RegExp?(m.ignoreCase&&(d="i"),m.unicode&&(d+="u"),m=m.source):m=String(m),new RegExp((!1===a?"":"^")+"(?:"+m+")",d)}function y(a){if(!a)return null;
if(a.apply)return a;if("string"==typeof a)return a.replace(/\./g," ");for(var b=[],d=0;d<a.length;d++)b.push(a[d]&&a[d].replace(/\./g," "));return b}function a(a,b){(a.next||a.push)&&n(b,a.next||a.push);this.regex=x(a.regex);this.token=y(a.token);this.data=a}function g(a,g){return function(d,f){if(f.pending){var e=f.pending.shift();return 0==f.pending.length&&(f.pending=null),d.pos+=e.text.length,e.token}if(f.local){if(f.local.end&&d.match(f.local.end))return e=f.local.endToken||null,f.local=f.localState=
null,e;var t,e=f.local.mode.token(d,f.localState);return f.local.endScan&&(t=f.local.endScan.exec(d.current()))&&(d.pos=d.start+t.index),e}for(var q=a[f.state],k=0;k<q.length;k++)if(e=q[k],t=(!e.data.sol||d.sol())&&d.match(e.regex)){e.data.next?f.state=e.data.next:e.data.push?((f.stack||(f.stack=[])).push(f.state),f.state=e.data.push):e.data.pop&&f.stack&&f.stack.length&&(f.state=f.stack.pop());if(e.data.mode){var l=g,q=f,k=e.data.mode,n=e.token,z=void 0;if(k.persistent)for(var v=q.persistentStates;v&&
!z;v=v.next)(k.spec?h(k.spec,v.spec):k.mode==v.mode)&&(z=v);l=z?z.mode:k.mode||b.getMode(l,k.spec);v=z?z.state:b.startState(l);k.persistent&&!z&&(q.persistentStates={mode:l,spec:k.spec,state:v,next:q.persistentStates});q.localState=v;q.local={mode:l,end:k.end&&x(k.end),endScan:k.end&&!1!==k.forceEnd&&x(k.end,!1),endToken:n&&n.join?n[n.length-1]:n}}e.data.indent&&f.indent.push(d.indentation()+g.indentUnit);e.data.dedent&&f.indent.pop();q=e.token;if(q&&q.apply&&(q=q(t)),2<t.length&&e.token&&"string"!=
typeof e.token){for(k=2;k<t.length;k++)t[k]&&(f.pending||(f.pending=[])).push({text:t[k],token:e.token[k-1]});return d.backUp(t[0].length-(t[1]?t[1].length:0)),q[0]}return q&&q.join?q[0]:q}return d.next(),null}}function h(a,b){if(a===b)return!0;if(!a||"object"!=typeof a||!b||"object"!=typeof b)return!1;var d=0,f;for(f in a)if(a.hasOwnProperty(f)){if(!b.hasOwnProperty(f)||!h(a[f],b[f]))return!1;d++}for(f in b)b.hasOwnProperty(f)&&d--;return 0==d}function l(a,h){return function(d,f,e){if(d.local&&d.local.mode.indent)return d.local.mode.indent(d.localState,
f,e);if(!(e=null==d.indent||d.local)&&(e=h.dontIndentStates)){a:{e=h.dontIndentStates;for(var g=0;g<e.length;g++)if(e[g]===d.state){e=!0;break a}e=void 0}e=-1<e}if(e)return b.Pass;e=d.indent.length-1;g=a[d.state];a:for(;;){for(var l=0;l<g.length;l++){var k=g[l];if(k.data.dedent&&!1!==k.data.dedentIfLineStart){var n=k.regex.exec(f);if(n&&n[0]){e--;(k.next||k.push)&&(g=a[k.next||k.push]);f=f.slice(n[0].length);continue a}}}break}return 0>e?0:d.indent[e]}}b.defineSimpleMode=function(a,g){b.defineMode(a,
function(a){return b.simpleMode(a,g)})};b.simpleMode=function(h,r){n(r,"start");var d={},f=r.meta||{},e=!1,t;for(t in r)if(t!=f&&r.hasOwnProperty(t))for(var q=d[t]=[],k=r[t],x=0;x<k.length;x++){var y=k[x];q.push(new a(y,r));(y.indent||y.dedent)&&(e=!0)}d={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:e?[]:null}},copyState:function(a){var d={state:a.state,pending:a.pending,local:a.local,localState:null,indent:a.indent&&a.indent.slice(0)};a.localState&&(d.localState=
b.copyState(a.local.mode,a.localState));a.stack&&(d.stack=a.stack.slice(0));for(var g=a.persistentStates;g;g=g.next)d.persistentStates={mode:g.mode,spec:g.spec,state:g.state==a.localState?d.localState:b.copyState(g.mode,g.state),next:d.persistentStates};return d},token:g(d,h),innerMode:function(a){return a.local&&{mode:a.local.mode,state:a.localState}},indent:l(d,f)};if(f)for(var z in f)f.hasOwnProperty(z)&&(d[z]=f[z]);return d}});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/multiplex",["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.multiplexingMode=function(n){function x(a,b,h,l){return"string"==typeof b?(h=a.indexOf(b,h),l&&-1<h?h+b.length:h):(b=b.exec(h?a.slice(h):a))?b.index+h+(l?b[0].length:0):-1}var y=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:b.startState(n),innerActive:null,
inner:null,startingInner:!1}},copyState:function(a){return{outer:b.copyState(n,a.outer),innerActive:a.innerActive,inner:a.innerActive&&b.copyState(a.innerActive.mode,a.inner),startingInner:a.startingInner}},token:function(a,g){if(g.innerActive){var h=g.innerActive,l=a.string;if(!h.close&&a.sol())return g.innerActive=g.inner=null,this.token(a,g);var m=h.close&&!g.startingInner?x(l,h.close,a.pos,h.parseDelimiters):-1;if(m==a.pos&&!h.parseDelimiters)return a.match(h.close),g.innerActive=g.inner=null,
h.delimStyle&&h.delimStyle+" "+h.delimStyle+"-close";-1<m&&(a.string=l.slice(0,m));var r=h.mode.token(a,g.inner);return-1<m?a.string=l:a.pos>a.start&&(g.startingInner=!1),m==a.pos&&h.parseDelimiters&&(g.innerActive=g.inner=null),h.innerStyle&&(r=r?r+" "+h.innerStyle:h.innerStyle),r}for(var r=1/0,l=a.string,d=0;d<y.length;++d){h=y[d];m=x(l,h.open,a.pos);if(m==a.pos)return h.parseDelimiters||a.match(h.open),g.startingInner=!!h.parseDelimiters,g.innerActive=h,l=0,n.indent&&(m=n.indent(g.outer,"",""),
m!==b.Pass&&(l=m)),g.inner=b.startState(h.mode,l),h.delimStyle&&h.delimStyle+" "+h.delimStyle+"-open";-1!=m&&m<r&&(r=m)}r!=1/0&&(a.string=l.slice(0,r));m=n.token(a,g.outer);return r!=1/0&&(a.string=l),m},indent:function(a,g,h){var l=a.innerActive?a.innerActive.mode:n;return l.indent?l.indent(a.innerActive?a.inner:a.outer,g,h):b.Pass},blankLine:function(a){var g=a.innerActive?a.innerActive.mode:n;if(g.blankLine&&g.blankLine(a.innerActive?a.inner:a.outer),a.innerActive)"\n"===a.innerActive.close&&(a.innerActive=
a.inner=null);else for(var h=0;h<y.length;++h){var l=y[h];"\n"===l.open&&(a.innerActive=l,a.inner=b.startState(l.mode,g.indent?g.indent(a.outer,"",""):0))}},electricChars:n.electricChars,innerMode:function(a){return a.inner?{state:a.inner,mode:a.innerActive.mode}:{state:a.outer,mode:n}}}}});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("../../addon/mode/simple"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define("mode/handlebars/handlebars.js",["../../lib/codemirror","../../addon/mode/simple","../../addon/mode/multiplex"],b):b(CodeMirror)})(function(b){b.defineSimpleMode("handlebars-tags",{start:[{regex:/\{\{\{/,push:"handlebars_raw",token:"tag"},{regex:/\{\{!--/,push:"dash_comment",token:"comment"},
{regex:/\{\{!/,push:"comment",token:"comment"},{regex:/\{\{/,push:"handlebars",token:"tag"}],handlebars_raw:[{regex:/\}\}\}/,pop:!0,token:"tag"}],handlebars:[{regex:/\}\}/,pop:!0,token:"tag"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"},{regex:/'(?:[^\\']|\\.)*'?/,token:"string"},{regex:/>|[#\/]([A-Za-z_]\w*)/,token:"keyword"},{regex:/(?:else|this)\b/,token:"keyword"},{regex:/\d+/i,token:"number"},{regex:/=|~|@|true|false/,token:"atom"},{regex:/(?:\.\.\/)*(?:[A-Za-z_][\w\.]*)+/,token:"variable-2"}],
dash_comment:[{regex:/--\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],comment:[{regex:/\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],meta:{blockCommentStart:"{{--",blockCommentEnd:"--}}"}});b.defineMode("handlebars",function(n,x){var y=b.getMode(n,"handlebars-tags");return x&&x.base?b.multiplexingMode(b.getMode(n,x.base),{open:"{{",close:/\}\}\}?/,mode:y,parseDelimiters:!0}):y});b.defineMIME("text/x-handlebars-template","handlebars")});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("mode/xml/xml.js",["../../lib/codemirror"],b):b(CodeMirror)})(function(b){var n={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},
contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},
allowUnquoted:!0,allowMissing:!0,caseFold:!0},x={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};b.defineMode("xml",function(y,a){function g(p,a){function c(c){return a.tokenize=c,c(p,a)}var b=p.next();if("\x3c"==b)return p.eat("!")?p.eat("[")?p.match("CDATA[")?c(m("atom","]]\x3e")):null:p.match("--")?c(m("comment","--\x3e")):p.match("DOCTYPE",!0,!0)?(p.eatWhile(/[\w\._\-]/),c(r(1))):null:p.eat("?")?(p.eatWhile(/[\w\._\-]/),
a.tokenize=m("meta","?\x3e"),"meta"):(A=p.eat("/")?"closeTag":"openTag",a.tokenize=h,"tag bracket");if("\x26"==b){var d;return d=p.eat("#")?p.eat("x")?p.eatWhile(/[a-fA-F\d]/)&&p.eat(";"):p.eatWhile(/[\d]/)&&p.eat(";"):p.eatWhile(/[\w\.\-:]/)&&p.eat(";"),d?"atom":"error"}return p.eatWhile(/[^&<]/),null}function h(p,a){var c=p.next();return"\x3e"==c||"/"==c&&p.eat("\x3e")?(a.tokenize=g,A="\x3e"==c?"endTag":"selfcloseTag","tag bracket"):"\x3d"==c?(A="equals",null):"\x3c"==c?(a.tokenize=g,a.state=q,
a.tagName=a.tagStart=null,(c=a.tokenize(p,a))?c+" tag error":"tag error"):/[\'\"]/.test(c)?(a.tokenize=l(c),a.stringStartCol=p.column(),a.tokenize(p,a)):(p.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function l(a){var b=function(c,b){for(;!c.eol();)if(c.next()==a){b.tokenize=h;break}return"string"};return b.isInAttribute=!0,b}function m(a,b){return function(c,d){for(;!c.eol();){if(c.match(b)){d.tokenize=g;break}c.next()}return a}}function r(a){return function(b,c){for(var d;null!=(d=
b.next());){if("\x3c"==d)return c.tokenize=r(a+1),c.tokenize(b,c);if("\x3e"==d){if(1==a){c.tokenize=g;break}return c.tokenize=r(a-1),c.tokenize(b,c)}}return"meta"}}function d(a){return a&&a.toLowerCase()}function f(a,b,c){this.prev=a.context;this.tagName=b||"";this.indent=a.indented;this.startOfLine=c;(u.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)&&(this.noIndent=!0)}function e(a){a.context&&(a.context=a.context.prev)}function t(a,b){for(var c;a.context&&(c=a.context.tagName,u.contextGrabbers.hasOwnProperty(d(c))&&
u.contextGrabbers[d(c)].hasOwnProperty(d(b)));)e(a)}function q(a,b,c){return"openTag"==a?(c.tagStart=b.column(),k):"closeTag"==a?H:q}function k(a,b,c){return"word"==a?(c.tagName=b.current(),w="tag",v):u.allowMissingTagName&&"endTag"==a?(w="tag bracket",v(a,b,c)):(w="error",k)}function H(a,b,c){return"word"==a?(a=b.current(),c.context&&c.context.tagName!=a&&u.implicitlyClosed.hasOwnProperty(d(c.context.tagName))&&e(c),c.context&&c.context.tagName==a||!1===u.matchClosing?(w="tag",C):(w="tag error",
z)):u.allowMissingTagName&&"endTag"==a?(w="tag bracket",C(a,b,c)):(w="error",z)}function C(a,b,c){return"endTag"!=a?(w="error",C):(e(c),q)}function z(a,b,c){return w="error",C(a,b,c)}function v(a,b,c){if("word"==a)return w="attribute",I;if("endTag"==a||"selfcloseTag"==a){b=c.tagName;var g=c.tagStart;return c.tagName=c.tagStart=null,"selfcloseTag"==a||u.autoSelfClosers.hasOwnProperty(d(b))?t(c,b):(t(c,b),c.context=new f(c,b,g==c.indented)),q}return w="error",v}function I(a,b,c){return"equals"==a?E:
(u.allowMissing||(w="error"),v(a,b,c))}function E(a,b,c){return"string"==a?F:"word"==a&&u.allowUnquoted?(w="string",v):(w="error",v(a,b,c))}function F(a,b,c){return"string"==a?F:v(a,b,c)}var D=y.indentUnit,u={},G=a.htmlMode?n:x,B;for(B in G)u[B]=G[B];for(B in a)u[B]=a[B];var A,w;return g.isInText=!0,{startState:function(a){var b={tokenize:g,state:q,indented:a||0,tagName:null,tagStart:null,context:null};return null!=a&&(b.baseIndent=a),b},token:function(a,b){if(!b.tagName&&a.sol()&&(b.indented=a.indentation()),
a.eatSpace())return null;A=null;var c=b.tokenize(a,b);return(c||A)&&"comment"!=c&&(w=null,b.state=b.state(A||c,a,b),w&&(c="error"==w?c+" error":w)),c},indent:function(a,f,c){var e=a.context;if(a.tokenize.isInAttribute)return a.tagStart==a.indented?a.stringStartCol+1:a.indented+D;if(e&&e.noIndent)return b.Pass;if(a.tokenize!=h&&a.tokenize!=g)return c?c.match(/^(\s*)/)[0].length:0;if(a.tagName)return!1!==u.multilineTagIndentPastTag?a.tagStart+a.tagName.length+2:a.tagStart+D*(u.multilineTagIndentFactor||
1);if(u.alignCDATA&&/<!\[CDATA\[/.test(f))return 0;if((f=f&&/^<(\/)?([\w_:\.-]*)/.exec(f))&&f[1])for(;e;){if(e.tagName==f[2]){e=e.prev;break}if(!u.implicitlyClosed.hasOwnProperty(d(e.tagName)))break;e=e.prev}else if(f)for(;e;){c=u.contextGrabbers[d(e.tagName)];if(!c||!c.hasOwnProperty(d(f[2])))break;e=e.prev}for(;e&&e.prev&&!e.startOfLine;)e=e.prev;return e?e.indent+D:a.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:u.htmlMode?"html":
"xml",helperType:u.htmlMode?"html":"xml",skipAttribute:function(a){a.state==E&&(a.state=v)},xmlCurrentTag:function(a){return a.tagName?{name:a.tagName,close:"closeTag"==a.type}:null},xmlCurrentContext:function(a){var b=[];for(a=a.context;a;a=a.prev)b.push(a.tagName);return b.reverse()}}});b.defineMIME("text/xml","xml");b.defineMIME("application/xml","xml");b.mimeModes.hasOwnProperty("text/html")||b.defineMIME("text/html",{name:"xml",htmlMode:!0})});
(function(b){"function"==typeof b.define&&b.define("modeHandlebars",["mode/handlebars/handlebars.js"],function(){})})(this);