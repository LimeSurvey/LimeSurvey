{"version":3,"sources":["webpack:///src/helperComponents/LabelSets.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA,mBADA;AAEA;AAAA;AAAA,GAFA;AAGA,mEAHA;AAIA;AACA;AAAA;AAAA;AAAA,KADA;AAEA;AAAA;AAAA;AAAA,KAFA;AAGA;AAAA;AAAA;AAAA,KAHA;AAIA;AAAA;AAAA;AAAA,KAJA;AAKA;AAAA;AAAA;AAAA;AALA,GAJA;AAWA,MAXA,kBAWA;AACA;AACA,mBADA;AAEA,qBAFA;AAGA;AAHA;AAKA,GAjBA;AAkBA;AACA,qBADA,+BACA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AARA,GAlBA;AA4BA;AACA,oBADA,4BACA,cADA,EACA;AACA;AACA,KAHA;AAIA,kBAJA,4BAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,KAPA;AAQA,gBARA,0BAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,KAXA;AAYA,wBAZA,gCAYA,KAZA,EAYA;AACA;AACA;AAdA,GA5BA;AA4CA,SA5CA,qBA4CA;AAAA;;AACA;AAAA;AAAA,YACA;AACA;AACA;AACA,KAJA,EAKA;AACA;;AACA;AACA,KARA;AAUA;AAvDA,G","file":"main.d439a51ddaf286d65c80.hot-update.js","sourcesContent":["<script>\r\nimport map from 'lodash/map';\r\nimport merge from 'lodash/merge';\r\nimport keys from 'lodash/keys';\r\n\r\nimport Autocomplete from './Autocomplete';\r\nimport AjaxMixin from '../mixins/runAjax';\r\n\r\nexport default {\r\n    name: 'LabelSets',\r\n    components: {Autocomplete},\r\n    mixins: [AjaxMixin],\r\n    props: {\r\n        template: {type: Object, required: true},\r\n        scaleId: {type: Number, required: true},\r\n        type: {type: String, required: true},\r\n        typedef: {type: String, required: true},\r\n        typekey: {type: String, required: true},\r\n    },\r\n    data() {\r\n        return {\r\n            labelSets: [],\r\n            isLoading: true,\r\n            currentLabelSet: null\r\n        };\r\n    },\r\n    computed: {\r\n        labelSetToDataSet() {\r\n            return map(this.currentLabelSet.labels, (label) => {\r\n                const dataSet = merge({},this.template);\r\n                dataSet[this.$store.state.activeLanguage][this.typedef] = this.currentLanguageValue(label);\r\n                dataSet[this.typekey] = label.code;\r\n                return dataSet;\r\n            });\r\n        }\r\n    },\r\n    methods: {\r\n        compileLanguages(languageString) {\r\n            return `(${languageString.split(' ').join(',')})`;\r\n        },\r\n        replaceCurrent() {\r\n            this.$emit('modalEvent', {target: this.type, method: 'replaceFromLabelSets', content: {scaleId: this.scaleId ,data: this.labelSetToDataSet}});\r\n            this.$emit('close');\r\n        },\r\n        addToCurrent() {\r\n            this.$emit('modalEvent', {target: this.type, method: 'addToFromLabelSets', content: {scaleId: this.scaleId ,data: this.labelSetToDataSet}});\r\n            this.$emit('close');\r\n        },\r\n        currentLanguageValue(label) {\r\n            return label[this.$store.state.activeLanguage] != undefined ? label[this.$store.state.activeLanguage].title : '';\r\n        }\r\n    },\r\n    created() {\r\n        this.$_get(LS.createUrl('admin/labels/sa/getLabelSetsForQuestion'), {'languages': keys(this.$store.state.languages)}).then(\r\n            (result) => {\r\n                this.isLoading = false;\r\n                this.labelSets = result.data;\r\n            },\r\n            (error) => {\r\n                this.$log.error(error);\r\n                this.isLoading = false;\r\n            }\r\n        )\r\n    }\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div class=\"panel panel-default ls-flex-column fill\">\r\n        <div class=\"panel-heading\">\r\n            <div class=\"row\">\r\n                <div class=\"pagetitle h3\">{{'Label sets' | translate}}</div>\r\n            </div>\r\n            <div class=\"row\">\r\n                <label class=\"control-label col-xs-12 col-md-4\"> \r\n                    <template v-if=\"isLoading\">\r\n                        <i class=\"fa fa-cog fa-spin\"></i>\r\n                    </template>\r\n                    <template v-else>\r\n                    {{\"Select label set\" | translate }} \r\n                    </template>\r\n                </label>\r\n                <div class=\"col-xs-12 col-md-8\">\r\n                    <autocomplete \r\n                        v-model=\"currentLabelSet\" \r\n                        :data-list=\"labelSets\"\r\n                        :searchable-keys=\"['label_name']\"\r\n                        show-key=\"label_name\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"panel-body\">\r\n            <div class=\"container-fluid\" v-if=\"currentLabelSet!=null\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-xs-12\">\r\n                        <h4> {{currentLabelSet.label_name }} </h4>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <hr/>\r\n                </div>\r\n                <div class=\"row scoped-descriptionrow\">\r\n                    <div class=\"col-xs-3\">\r\n                        {{\"Sortorder\"|translate}}\r\n                    </div>\r\n                    <div class=\"col-xs-3\">\r\n                        {{typekey|translate}}\r\n                    </div>\r\n                    <div class=\"col-xs-3\">\r\n                        {{typedef|translate}}\r\n                    </div>\r\n                    <div class=\"col-xs-3\" v-if=\"type=='answeroptions'\">\r\n                        {{ \"Assessment value\"|translate }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\" v-for=\"label in currentLabelSet.labels\" :key=\"label.id\">\r\n                    <div class=\"col-xs-3\">\r\n                        {{label.sortorder}}\r\n                    </div>\r\n                    <div class=\"col-xs-3\">\r\n                        {{label.code}}\r\n                    </div>\r\n                    <div class=\"col-xs-3\">\r\n                        {{ currentLanguageValue(label) }}\r\n                    </div>\r\n                    <div class=\"col-xs-3\" v-if=\"type=='answeroptions'\">\r\n                        {{ label.assessment_value }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div  class=\"container-fluid\" v-else>\r\n                <div class=\"row\">\r\n                    <div class=\"row\">\r\n                        <p class=\"text-center scoped-no-selection\"> {{\"No label set selected\" | translate}} </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"panel-footer\">\r\n            <div class=\"ls-flex-row wrap\">\r\n                <div class=\"ls-flex-item\">\r\n                    <button class=\"btn btn-primary ls-space margin left-5\" @click=\"replaceCurrent\" type=\"button\">{{'Replace' | translate}}</button>\r\n                    <button class=\"btn btn-primary ls-space margin left-5\" @click=\"addToCurrent\" type=\"button\">{{'Add' | translate}}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":""}